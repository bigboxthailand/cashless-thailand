import{j as t}from"./jsx-runtime.D_zvdyIk.js";import{r as e}from"./index.WFquGv8Z.js";import{s as l}from"./supabase.B9bYqD4q.js";import j from"./AuthModal.Brc0PkPI.js";import"./index.DR2MMlUt.js";function M(){const[u,d]=e.useState(null),[m,f]=e.useState(null),[g,p]=e.useState(!1),[w,x]=e.useState(null);e.useEffect(()=>{l.auth.getSession().then(({data:{session:s}})=>{d(s),s&&h(s.user.id)});const{data:{subscription:i}}=l.auth.onAuthStateChange((s,c)=>{d(c),c?h(c.user.id):x(null)}),a=localStorage.getItem("user_wallet");return a&&f(a),()=>i.unsubscribe()},[]);const h=async i=>{const{data:a}=await l.from("profiles").select("avatar_url, full_name").eq("id",i).single();x(a)},y=async()=>{u?await l.auth.signOut():m&&(localStorage.removeItem("user_wallet"),f(null),window.location.reload())},o="mobile-nav-link text-3xl font-black text-white hover:text-[#D4AF37] transition-colors tracking-widest uppercase flex items-center justify-center gap-3 group w-full cursor-pointer",r=t.jsx("span",{className:"opacity-0 -translate-x-4 group-hover:opacity-100 group-hover:translate-x-0 transition-all duration-300 text-[#D4AF37]",children:"•"}),n=t.jsx("span",{className:"opacity-0 translate-x-4 group-hover:opacity-100 group-hover:translate-x-0 transition-all duration-300 text-[#D4AF37]",children:"•"});return u||m?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"mobile-link-item translate-y-12 opacity-0 transition-all duration-500 delay-[300ms] w-full text-center",children:t.jsxs("a",{href:"/profile",className:o,children:[r,"My Profile",n]})}),t.jsx("div",{className:"mobile-link-item translate-y-12 opacity-0 transition-all duration-500 delay-[350ms] w-full text-center",children:t.jsxs("button",{onClick:y,className:o,children:[r,t.jsx("span",{className:"text-red-500 group-hover:text-red-400",children:"Logout"}),n]})})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"mobile-link-item translate-y-12 opacity-0 transition-all duration-500 delay-[300ms] w-full text-center",children:t.jsxs("button",{onClick:()=>p(!0),className:o,children:[r,"Login / Register",n]})}),t.jsx(j,{isOpen:g,onClose:()=>p(!1)})]})}export{M as default};
