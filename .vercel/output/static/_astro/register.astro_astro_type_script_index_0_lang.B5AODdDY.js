import{s as c}from"./supabase.B9bYqD4q.js";import"./index.DR2MMlUt.js";const u=document.querySelector('input[name="name"]'),m=document.getElementById("url-preview");u?.addEventListener("input",r=>{const a=r.target.value.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)+/g,"");m.innerText=a||"..."});const o=document.getElementById("register-shop-form");o?.addEventListener("submit",async r=>{r.preventDefault();const e=o.querySelector("button"),a=e.innerText;e.disabled=!0,e.innerText="Creating...";try{const t=new FormData(o),s=t.get("name"),d=t.get("description"),l=s.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)+/g,""),{data:{user:i}}=await c.auth.getUser();if(!i)throw new Error("Not authenticated");const{data:g,error:n}=await c.from("shops").insert({owner_id:i.id,name:s,slug:l,description:d,status:"active"}).select().single();if(n)throw n.code==="23505"?new Error("Shop name already taken."):n;alert("Shop Created! Redirecting to Dashboard..."),window.location.href="/seller/dashboard"}catch(t){alert(t.message),e.disabled=!1,e.innerText=a}});
