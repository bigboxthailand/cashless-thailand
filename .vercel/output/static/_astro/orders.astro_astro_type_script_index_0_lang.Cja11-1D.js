import{s as d}from"./supabase.B9bYqD4q.js";import"./index.DR2MMlUt.js";window.updateStatus=async(r,t)=>{if(t==="shipped"){const e=prompt("Please enter Tracking Number (optional):");if(e!==null){const{error:s}=await d.from("orders").update({shipping_status:"shipped",payment_status:"shipped",tracking_number:e}).eq("id",r);if(s){alert("Error saving tracking: "+s.message);return}const a=window.allOrders.find(l=>l.id===r);a&&(a.payment_status="shipped",a.shipping_status="shipped",a.tracking_number=e)}else return}else{const{error:e}=await d.from("orders").update({payment_status:t}).eq("id",r);if(e){alert(e.message);return}const s=window.allOrders.find(a=>a.id===r);s&&(s.payment_status=t)}const i=document.querySelector(`tr[data-order-id="${r}"]`);if(!i)return;const n=i.querySelector("td:nth-child(7) span");n&&(n.textContent=t,n.className="px-2 py-1 rounded text-xs font-bold uppercase "+(t==="paid"?"bg-green-500/10 text-green-500":t==="shipped"?"bg-blue-500/10 text-blue-500":"bg-yellow-500/10 text-yellow-500"));const o=i.querySelector("td:last-child .flex");if(o){if(o.querySelectorAll("button[data-action='paid'], button[data-action='ship']").forEach(e=>e.remove()),t==="paid"){const e=document.createElement("button");e.textContent="Ship",e.dataset.action="ship",e.dataset.orderId=r,e.className="bg-blue-600 hover:bg-blue-500 text-white text-xs px-3 py-1.5 rounded font-bold",o.appendChild(e)}document.getElementById("order-modal")?.classList.add("hidden")}};
