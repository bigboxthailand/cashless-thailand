import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as o}from"./index.WFquGv8Z.js";import{C as A,a as S,L as D,P as F,e as R,B,p as E,b as L,c as _,i as T,d as W,f as I}from"./index.DaEOfkTG.js";import{m as P}from"./proxy.Bc5WEKy4.js";A.register(S,D,F,R,B,E,L,_,T);const m={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:"#111",titleColor:"#fff",bodyColor:"#D4AF37",borderColor:"#333",borderWidth:1,padding:10}},scales:{x:{grid:{color:"#333",display:!1},ticks:{color:"#666"}},y:{grid:{color:"#222",borderDash:[5,5]},ticks:{color:"#666",callback:h=>h.toLocaleString()}}},interaction:{mode:"index",intersect:!1},elements:{line:{tension:.4},bar:{borderRadius:4}}};function H({orders:h=[]}){const[n,f]=o.useState("line"),[i,v]=o.useState("day"),[u,j]=o.useState("all"),[s,w]=o.useState("all"),[x,k]=o.useState("all"),[d,y]=o.useState("all"),p=o.useMemo(()=>{const t=a=>({Bangkok:"Bangkok","Chiang Mai":"North","Chiang Rai":"North",Nan:"North","Khon Kaen":"Isan","Nakhon Ratchasima":"Isan","Udon Thani":"Isan",Phuket:"South",Songkhla:"South",Krabi:"South","Chon Buri":"East",Rayong:"East",Kanchanaburi:"West",Ratchaburi:"West",Ayutthaya:"Central",Saraburi:"Central"})[a]||"Other";let b=h.filter(a=>{if(u!=="all"&&a.sex!==u)return!1;const r=a.age||0;if(s==="<25"&&r>=25||s==="25-40"&&(r<25||r>40)||s===">40"&&r<=40||x!=="all"&&t(a.province)!==x)return!1;const l=a.buy_duration||0;return!(d==="fast"&&l>60||d==="normal"&&(l<=60||l>300)||d==="long"&&l<=300)});b.sort((a,r)=>new Date(a.created_at)-new Date(r.created_at));const g=b.reduce((a,r)=>{const l=new Date(r.created_at);let c;return i==="day"?c=l.toLocaleDateString("th-TH",{day:"2-digit",month:"short"}):i==="month"?c=l.toLocaleDateString("th-TH",{month:"long",year:"numeric"}):c=l.getFullYear().toString(),a[c]=(a[c]||0)+Number(r.total_price),a},{}),C=Object.keys(g),N=Object.values(g);return{labels:C,datasets:[{label:`Revenue (${i})`,data:N,borderColor:"#D4AF37",backgroundColor:n==="area"?"rgba(212, 175, 55, 0.2)":"#D4AF37",fill:n==="area",borderWidth:2,pointBackgroundColor:"#000",pointBorderColor:"#D4AF37",pointRadius:4}]}},[h,n,i,u,s,x,d]);return e.jsxs("div",{className:"bg-[#0A0A0A] border border-white/10 p-6 rounded-xl relative overflow-hidden space-y-6",children:[e.jsxs("div",{className:"flex flex-col xl:flex-row justify-between items-start xl:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-white font-bold uppercase tracking-wider text-sm flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-[#D4AF37] rounded-full animate-pulse"}),"Advanced Analytics"]}),e.jsx("p",{className:"text-white/30 text-xs mt-1",children:"Filtered Revenue Performance"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 bg-white/5 p-2 rounded-lg border border-white/5 w-full xl:w-auto items-center",children:[e.jsx("div",{className:"flex bg-black/40 rounded p-1",children:["day","month","year"].map(t=>e.jsx("button",{onClick:()=>v(t),className:`px-2 py-1 text-[10px] font-bold uppercase rounded ${i===t?"bg-[#D4AF37] text-black":"text-white/50 hover:text-white"}`,children:t},t))}),e.jsx("div",{className:"w-px h-6 bg-white/10 mx-1 hidden sm:block"}),e.jsxs("select",{value:u,onChange:t=>j(t.target.value),className:"bg-black/40 text-white text-[10px] px-2 py-1.5 rounded border border-white/10 outline-none hover:border-[#D4AF37]",children:[e.jsx("option",{value:"all",children:"Sex: All"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"})]}),e.jsxs("select",{value:s,onChange:t=>w(t.target.value),className:"bg-black/40 text-white text-[10px] px-2 py-1.5 rounded border border-white/10 outline-none hover:border-[#D4AF37]",children:[e.jsx("option",{value:"all",children:"Age: All"}),e.jsxs("option",{value:"<25",children:["<"," 25"]}),e.jsx("option",{value:"25-40",children:"25-40"}),e.jsxs("option",{value:">40",children:[">"," 40"]})]}),e.jsxs("select",{value:x,onChange:t=>k(t.target.value),className:"bg-black/40 text-white text-[10px] px-2 py-1.5 rounded border border-white/10 outline-none hover:border-[#D4AF37]",children:[e.jsx("option",{value:"all",children:"Region: All"}),e.jsx("option",{value:"Bangkok",children:"Bangkok"}),e.jsx("option",{value:"North",children:"North"}),e.jsx("option",{value:"South",children:"South"}),e.jsx("option",{value:"Isan",children:"Isan"}),e.jsx("option",{value:"East",children:"East"}),e.jsx("option",{value:"West",children:"West"}),e.jsx("option",{value:"Central",children:"Central"})]}),e.jsxs("select",{value:d,onChange:t=>y(t.target.value),className:"bg-black/40 text-white text-[10px] px-2 py-1.5 rounded border border-white/10 outline-none hover:border-[#D4AF37]",children:[e.jsx("option",{value:"all",children:"Time: All"}),e.jsxs("option",{value:"fast",children:["Fast (","<","1m)"]}),e.jsx("option",{value:"normal",children:"Normal (1-5m)"}),e.jsxs("option",{value:"long",children:["Long (",">","5m)"]})]}),e.jsx("div",{className:"w-px h-6 bg-white/10 mx-1 hidden sm:block"}),e.jsx("div",{className:"flex gap-1",children:["line","bar","area"].map(t=>e.jsx("button",{onClick:()=>f(t),className:`w-6 h-6 flex items-center justify-center rounded text-[10px] uppercase font-bold ${n===t?"bg-white text-black":"bg-white/10 text-white hover:bg-white/20"}`,children:t[0]},t))})]})]}),e.jsx(P.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},transition:{duration:.3},className:"h-[350px] w-full bg-gradient-to-b from-white/2 to-transparent rounded-lg border border-white/5 p-2",children:n==="bar"?e.jsx(W,{options:m,data:p}):e.jsx(I,{options:m,data:p})},n+i)]})}export{H as default};
