---
// src/pages/manual/system-workflow.astro
import Layout from "../../layouts/Layout.astro";
import Navbar from "../../components/Navbar.astro";

const steps = [
    {
        number: "01",
        title: "Platform Onboarding",
        subtitle: "‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡∏ï‡∏ô‡πÅ‡∏•‡∏∞‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≥ (Identity Store)",
        description: "‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏ú‡πà‡∏≤‡∏ô Hybrid Auth (Email ‡∏´‡∏£‡∏∑‡∏≠ Metamask) ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á Profile ID ‡πÅ‡∏•‡∏∞‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡πÅ‡∏ï‡πâ‡∏°‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠",
        icon: "üßß",
        technical: "supabase.auth.signIn() / ethers.js Web3 Provider"
    },
    {
        number: "02",
        title: "Smart Discovery",
        subtitle: "‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÅ‡∏•‡∏∞‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Product Engine)",
        description: "‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ú‡πà‡∏≤‡∏ô‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤ Shop ‡∏´‡∏£‡∏∑‡∏≠‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏à‡∏≤‡∏Å Blog ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏à‡∏≤‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å ‡πÅ‡∏•‡∏∞ Metadata ‡∏Ç‡∏≠‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏ö‡∏ö‡πÄ‡∏à‡∏≤‡∏∞‡∏•‡∏∂‡∏Å",
        icon: "üîç",
        technical: "Supabase PG Filter / Real-time Stock Check"
    },
    {
        number: "03",
        title: "Cart Orchestration",
        subtitle: "‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏ö‡∏ö Persistent (Local State)",
        description: "‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ñ‡∏π‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ Nanostores ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏ß‡∏î‡πÄ‡∏£‡πá‡∏ß ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô‡πÅ‡∏•‡∏∞‡∏à‡∏≠‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏™‡∏ï‡πá‡∏≠‡∏Å‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß‡∏ú‡πà‡∏≤‡∏ô UI Drawer",
        icon: "üõí",
        technical: "persistentAtom (Nanostores) / cartStore.js"
    },
    {
        number: "04",
        title: "Tier-Aware Checkout",
        subtitle: "‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‡∏ï‡∏≤‡∏°‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å (Logic Layer)",
        description: "‡πÉ‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Tier ‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏°‡∏≤‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‡∏ó‡∏±‡∏ô‡∏ó‡∏µ (‡πÄ‡∏ä‡πà‡∏ô Gold ‡∏•‡∏î 5%) ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡πÅ‡∏ï‡πâ‡∏°‡∏™‡∏∞‡∏™‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡∏î‡∏´‡∏¢‡πà‡∏≠‡∏ô‡∏£‡∏≤‡∏Ñ‡∏≤‡∏™‡∏∏‡∏ó‡∏ò‡∏¥",
        icon: "üí≥",
        technical: "Membership Rewards Engine / Order Validation"
    },
    {
        number: "05",
        title: "Multi-Rail Payment",
        subtitle: "‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏Ç‡πâ‡∏≤‡∏°‡∏Ç‡∏µ‡∏î‡∏à‡∏≥‡∏Å‡∏±‡∏î (Hybrid Gateway)",
        description: "‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡πà‡∏≤‡∏¢‡∏ú‡πà‡∏≤‡∏ô PromptPay (Scan & Verify), Web3 (Direct Wallet transfer) ‡∏´‡∏£‡∏∑‡∏≠ Bitcoin Lightning (Qr Code) ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡πÄ‡∏Å‡πá‡∏ö‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏±‡∏ô‡∏ó‡∏µ",
        icon: "‚ö°",
        technical: "PromptPay EMVCo / Lightning Invoice / Web3 RPC"
    },
    {
        number: "06",
        title: "Fulfillment Sync",
        subtitle: "‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏π‡πà‡∏ú‡∏π‡πâ‡∏Ç‡∏≤‡∏¢ (Supply Chain)",
        description: "‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏ú‡∏•‡∏¥‡∏ï‡∏†‡∏±‡∏ì‡∏ë‡πå‡∏ú‡πà‡∏≤‡∏ô Seller Dashboard ‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏•‡∏¥‡∏õ‡πÅ‡∏•‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡πá‡∏Ñ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏á Tracking Number",
        icon: "üì¶",
        technical: "Order Status Automation / Seller Notifications"
    },
    {
        number: "07",
        title: "The Rewarding Loop",
        subtitle: "‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï‡∏Ç‡∏≠‡∏á‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ Passive (Growth)",
        description: "‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏Å‡∏î‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ‡πÅ‡∏ï‡πâ‡∏°‡∏™‡∏∞‡∏™‡∏°‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÇ‡∏≠‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏≠‡∏±‡∏õ‡πÄ‡∏Å‡∏£‡∏î Tier ‡πÅ‡∏•‡∏∞‡πÅ‡∏ä‡∏£‡πå‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏Ñ‡πà‡∏≤ Affiliate ‡πÉ‡∏´‡πâ‡∏Å‡∏±‡∏ö‡∏ú‡∏π‡πâ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ (5% Commission)",
        icon: "üíé",
        technical: "Point Distribution / Affiliate Referral Credit"
    }
];

const sidebarItems = [
    { title: "Introduction", items: [
        { title: "Overview", link: "/manual" },
        { title: "System Workflow", link: "/manual/system-workflow", active: true },
        { title: "Visual Logic Flows", link: "/manual/visual-flows" },
    ]},
    { title: "Core Features", items: [
        { title: "Home Page (Index)", link: "/manual/page-index" },
        { title: "Shop Catalog", link: "/manual/page-shop" },
        { title: "Product Detail", link: "/manual/page-product" },
        { title: "User Profile", link: "/manual/page-profile" },
    ]},
    { title: "Logic & State", items: [
        { title: "Shopping Cart", link: "/manual/module-cart" },
        { title: "Checkout System", link: "/manual/module-checkout" },
        { title: "Auth & Tiers", link: "/manual/module-auth" },
        { title: "BTC/SATS Engine", link: "/manual/module-btc" },
    ]},
    { title: "Edu-System", items: [
        { title: "Course Hub", link: "/manual/course-system" },
        { title: "Learn Track (Soon)", link: "/manual/learn-track" },
    ]},
    { title: "Marketing & Growth", items: [
        { title: "Insights & Blog", link: "/manual/blog-system" },
        { title: "Affiliate System", link: "/manual/affiliate-manual" },
    ]},
    { title: "Management Systems", items: [
        { title: "Admin Portal", link: "/manual/admin-interface" },
        { title: "Seller Dashboard", link: "/manual/seller-guide" },
    ]}
];
---

<Layout title="System Workflow | Cashless Thailand Manual">
    <Navbar />

    <div class="min-h-screen bg-[#0a0a0a] pt-32 flex">
        <!-- Sidebar Navigation -->
        <aside class="w-72 border-r border-white/5 bg-[#050505] hidden lg:block overflow-y-auto px-6 py-10 fixed top-32 bottom-0 h-[calc(100vh-8rem)] z-20">
            <nav class="space-y-8">
                {sidebarItems.map(section => (
                    <div>
                        {section.items ? (
                            <div class="space-y-4">
                                <h4 class="text-[10px] uppercase tracking-[0.2em] text-white/30 font-black px-2">{section.title}</h4>
                                <ul class="space-y-1">
                                    {section.items.map(item => (
                                        <li>
                                            <a href={item.link} class={`block px-4 py-2 rounded-lg text-sm transition-all ${item.active ? "bg-[#D4AF37]/10 text-[#D4AF37] font-bold" : "text-white/50 hover:text-white hover:bg-white/5"}`}>
                                                {item.title}
                                            </a>
                                        </li>
                                    ))}
                                </ul>
                            </div>
                            ) : (
                                <a
                                    href={(section as any).link}
                                    class="block px-6 py-2 text-sm text-white/50 hover:text-white hover:bg-white/5 rounded-lg transition-all font-bold"
                                >
                                    {section.title}
                                </a>
                            )}
                    </div>
                ))}
            </nav>
        </aside>

        <!-- Main Documentation Content -->
        <main class="flex-1 lg:ml-72 px-6 md:px-12 py-12 md:py-20 lg:py-24 max-w-5xl mx-auto">
            <div class="space-y-20">
                <!-- Header -->
                <header class="space-y-8">
                    <div class="flex items-center gap-2 text-white/30 text-[10px] font-black uppercase tracking-[0.3em]">
                        <span>Directory</span>
                        <span>/</span>
                        <span class="text-[#D4AF37]">Operational Blueprint</span>
                    </div>
                    <h1 class="text-4xl md:text-7xl font-black text-white tracking-tighter leading-none">System <br/> Workflow</h1>
                    <p class="text-white/50 text-xl leading-relaxed max-w-3xl">
                        ‡πÅ‡∏ú‡∏ô‡∏ú‡∏±‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏ä‡∏¥‡∏á‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡∏ó‡∏µ‡πà‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏ó‡∏∏‡∏Å‡∏™‡πà‡∏ß‡∏ô‡∏Ç‡∏≠‡∏á‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô 
                        ‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡∏ï‡∏ô ‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ‡∏à‡∏ô‡∏ñ‡∏∂‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ
                    </p>
                </header>

                <!-- Step-by-Step Interactive Guide -->
                <div class="relative space-y-12">
                    <!-- Vertical Line -->
                    <div class="absolute left-8 top-10 bottom-10 w-px bg-gradient-to-b from-[#D4AF37]/50 via-white/5 to-transparent hidden md:block"></div>

                    {steps.map(step => (
                        <div class="relative pl-0 md:pl-24 group">
                            <!-- Floating Number Indicator -->
                            <div class="absolute left-0 top-0 w-16 h-16 bg-[#111] border border-white/5 rounded-2xl hidden md:flex items-center justify-center z-10 group-hover:border-[#D4AF37]/50 transition-all group-hover:scale-110 shadow-2xl">
                                <span class="text-xl font-black text-[#D4AF37]">{step.number}</span>
                            </div>

                            <div class="bg-[#111] border border-white/5 rounded-[2.5rem] p-8 md:p-12 hover:bg-[#151515] transition-all relative overflow-hidden group-hover:border-[#D4AF37]/20">
                                <!-- Background Icon Overlay -->
                                <div class="absolute -right-8 -bottom-8 text-9xl opacity-[0.03] group-hover:scale-125 transition-transform duration-700 pointer-events-none">
                                    {step.icon}
                                </div>

                                <div class="flex flex-col md:flex-row md:items-start justify-between gap-6 relative z-10">
                                    <div class="space-y-4 max-w-2xl">
                                        <div class="space-y-1">
                                            <span class="text-[10px] font-black uppercase tracking-[0.3em] text-[#D4AF37]">{step.subtitle}</span>
                                            <h3 class="text-3xl font-black text-white">{step.title}</h3>
                                        </div>
                                        <p class="text-white/50 leading-relaxed text-lg">
                                            {step.description}
                                        </p>
                                        <div class="pt-4 flex items-center gap-3">
                                            <span class="px-3 py-1 bg-black/50 border border-white/10 rounded-lg text-[10px] font-mono text-white/30 uppercase tracking-widest">
                                                Technical: {step.technical}
                                            </span>
                                        </div>
                                    </div>
                                    <div class="hidden lg:block">
                                        <div class="w-12 h-12 bg-white/5 rounded-full flex items-center justify-center text-xl grayscale group-hover:grayscale-0 transition-all group-hover:scale-110">
                                            {step.icon}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    ))}
                </div>

                <!-- Closing Strategic Section -->
                <section class="p-16 bg-gradient-to-br from-[#D4AF37]/5 to-black border border-[#D4AF37]/10 rounded-[4rem] text-center space-y-8">
                    <h2 class="text-4xl font-black text-white">The Unified Ecosystem</h2>
                    <p class="text-white/60 max-w-2xl mx-auto leading-relaxed text-lg">
                        ‡∏ó‡∏∏‡∏Å‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ñ‡∏π‡∏Å‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏°‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡∏∑‡πà‡∏ô‡πÑ‡∏´‡∏• (Seamless Experience) 
                        ‡πÇ‡∏î‡∏¢‡∏°‡∏µ‡∏£‡∏∞‡∏ö‡∏ö Membership ‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏£‡∏∞‡∏î‡∏π‡∏Å‡∏™‡∏±‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÇ‡∏¢‡∏á‡∏û‡∏§‡∏ï‡∏¥‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏±‡∏ö‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏ó‡∏µ‡πà‡∏à‡∏±‡∏ö‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á
                    </p>
                    <div class="flex justify-center gap-6 pt-8">
                        <a href="/manual/page-index" class="px-8 py-4 bg-[#D4AF37] text-black font-black uppercase tracking-widest rounded-2xl hover:scale-105 transition-all shadow-[0_10px_40px_rgba(212,175,55,0.3)]">Explore Index</a>
                    </div>
                </section>

                <!-- Navigation -->
                <footer class="pt-16 border-t border-white/5 flex justify-between items-center text-sm font-black uppercase tracking-[0.3em]">
                    <a href="/manual" class="text-white/20 hover:text-[#D4AF37] transition-all">‚Üê Overview</a>
                    <a href="/manual/page-index" class="text-[#D4AF37] hover:text-white transition-all">Next: Home Page ‚Üí</a>
                </footer>
            </div>
        </main>
    </div>
</Layout>

<style is:global>
    aside::-webkit-scrollbar { width: 4px; }
    aside::-webkit-scrollbar-track { background: transparent; }
    aside::-webkit-scrollbar-thumb { background: #222; border-radius: 10px; }
</style>
