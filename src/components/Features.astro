---
// src/components/ProductEcosystem.astro
// อัปเกรด: Cinematic Scroll Reveal + Direct Purchase Buttons
---

<section class="bg-[#050505] text-white py-32 overflow-hidden font-sans relative" id="ecosystem-section">
    
    <div class="absolute top-0 left-1/2 -translate-x-1/2 w-full h-[800px] bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-[#D4AF37]/10 via-transparent to-transparent pointer-events-none"></div>

    <div class="max-w-[1400px] mx-auto px-6 md:px-12 relative z-10">
        
        <div class="text-center max-w-4xl mx-auto mb-40 reveal-element">
            <span class="inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-white/5 border border-white/10 text-[#D4AF37] font-bold tracking-[0.2em] uppercase text-xs mb-6 backdrop-blur-md shadow-[0_0_20px_rgba(212,175,55,0.1)]">
                <span class="w-1.5 h-1.5 bg-[#D4AF37] rounded-full animate-pulse"></span>
                The Complete Ecosystem
            </span>
            <h2 class="text-4xl md:text-6xl lg:text-7xl font-black tracking-tight leading-[1.1] mb-8">
                เปลี่ยนร้านของคุณให้เป็น <br/>
                <span class="text-transparent bg-clip-text bg-gradient-to-r from-white via-[#F4E08F] to-[#D4AF37] italic">แลนด์มาร์ค</span> แห่งอนาคต
            </h2>
            <p class="text-white/60 text-lg md:text-xl font-light max-w-2xl mx-auto">
                4 นวัตกรรมที่ทำงานประสานกันอย่างไร้รอยต่อ ตั้งแต่หน้าร้านจนถึงหลังบ้าน ยกระดับธุรกิจคุณสู่ยุค Cashless อย่างสมบูรณ์แบบ
            </p>
        </div>

        <div class="relative">
            <div class="absolute left-1/2 top-0 bottom-0 w-[1px] bg-gradient-to-b from-transparent via-white/10 to-transparent hidden md:block"></div>

            <div class="ecosystem-step flex flex-col md:flex-row items-center gap-12 md:gap-20 mb-40">
                <div class="w-full md:w-1/2 relative step-img">
                    <div class="aspect-[4/3] rounded-[2.5rem] overflow-hidden bg-[#111] border border-white/10 shadow-[0_0_50px_rgba(212,175,55,0.05)] relative group">
                        <img src="/images/gallery/clock-night.webp" alt="CryptoClock" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-[1.5s]" loading="lazy">
                        <div class="absolute inset-0 bg-gradient-to-t from-[#050505]/80 via-transparent to-transparent"></div>
                        <div class="absolute top-6 left-6">
                            <span class="text-white/80 font-mono text-xs tracking-widest bg-black/50 px-3 py-1 rounded-full backdrop-blur-md border border-white/10">01 / FRONT OF HOUSE</span>
                        </div>
                    </div>
                </div>
                <div class="w-full md:w-1/2 space-y-6 step-text">
                    <h3 class="text-4xl md:text-5xl font-bold tracking-tight text-white">CryptoClock</h3>
                    <h4 class="text-xl md:text-2xl font-light text-[#D4AF37]">ป้ายเช็คอินดึงดูดสายตา</h4>
                    <p class="text-white/60 text-lg leading-relaxed max-w-md mb-8">
                        หน้าปัดแสดงราคา Bitcoin Real-time ดีไซน์ล้ำสมัย เป็นแม่เหล็กดึงดูดลูกค้าสาย Tech ให้อยากเดินเข้าร้านและถ่ายรูปแชร์ลงโซเชียล
                    </p>
                    <a href="/products/cryptoclock" class="group inline-flex items-center gap-3 px-8 py-4 bg-white text-black rounded-full font-bold text-sm tracking-widest uppercase hover:bg-[#D4AF37] transition-all duration-300">
                        <span>Explore CryptoClock</span>
                        <svg class="w-4 h-4 transform group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"/></svg>
                    </a>
                </div>
            </div>

            <div class="ecosystem-step flex flex-col md:flex-row-reverse items-center gap-12 md:gap-20 mb-40">
                <div class="w-full md:w-1/2 relative step-img">
                    <div class="absolute top-1/2 -left-[51px] w-3 h-3 bg-[#D4AF37] rounded-full shadow-[0_0_15px_#D4AF37] hidden md:block"></div>
                    
                    <div class="aspect-[4/3] rounded-[2.5rem] overflow-hidden bg-[#111] border border-white/10 relative group">
                        <img src="/images/gallery/setup-1.webp" alt="BiTTerm" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-[1.5s]" loading="lazy">
                        <div class="absolute inset-0 bg-gradient-to-t from-[#050505]/80 via-transparent to-transparent"></div>
                        <div class="absolute top-6 left-6">
                            <span class="text-white/80 font-mono text-xs tracking-widest bg-black/50 px-3 py-1 rounded-full backdrop-blur-md border border-white/10">02 / CUSTOMER SCREEN</span>
                        </div>
                    </div>
                </div>
                <div class="w-full md:w-1/2 space-y-6 md:pl-10 step-text">
                    <h3 class="text-4xl md:text-5xl font-bold tracking-tight text-white">BiTTerm</h3>
                    <h4 class="text-xl md:text-2xl font-light text-[#D4AF37]">หน้าจอชำระเงินสุดล้ำ</h4>
                    <p class="text-white/60 text-lg leading-relaxed max-w-md mb-8">
                        สร้าง First Impression ให้ลูกค้าด้วยหน้าจอโชว์ QR Code ขนาดใหญ่ สแกนจ่ายง่ายเหมือนพร้อมเพย์ โอนปุ๊บ หน้าจอขึ้นเครื่องหมาย "SUCCESS" ทันที
                    </p>
                    <a href="/products/bitterm" class="group inline-flex items-center gap-3 px-8 py-4 bg-white/5 text-white border border-white/10 rounded-full font-bold text-sm tracking-widest uppercase hover:bg-white hover:text-black transition-all duration-300">
                        <span>Explore BiTTerm</span>
                        <svg class="w-4 h-4 transform group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"/></svg>
                    </a>
                </div>
            </div>

            <div class="ecosystem-step flex flex-col md:flex-row items-center gap-12 md:gap-20 mb-40">
                <div class="w-full md:w-1/2 relative step-img">
                    <div class="aspect-[4/3] rounded-[2.5rem] overflow-hidden bg-[#111] border border-white/10 relative group">
                        <img src="/images/gallery/cafe-1.webp" alt="BiTPos" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-[1.5s]" loading="lazy">
                        <div class="absolute inset-0 bg-gradient-to-t from-[#050505]/80 via-transparent to-transparent"></div>
                        <div class="absolute top-6 left-6">
                            <span class="text-white/80 font-mono text-xs tracking-widest bg-black/50 px-3 py-1 rounded-full backdrop-blur-md border border-white/10">03 / CASHIER CONTROL</span>
                        </div>
                    </div>
                </div>
                <div class="w-full md:w-1/2 space-y-6 step-text">
                    <h3 class="text-4xl md:text-5xl font-bold tracking-tight text-white">BiTPos</h3>
                    <h4 class="text-xl md:text-2xl font-light text-[#D4AF37]">คุมทุกออเดอร์ในหน้าเดียว</h4>
                    <p class="text-white/60 text-lg leading-relaxed max-w-md mb-8">
                        หน้าจอจัดการสำหรับแคชเชียร์ กดปุ่มเดียวส่งยอดเงินไปแสดงที่ BiTTerm ทันที ตัดจบปัญหาลูกค้ายืนรอ หรือพนักงานกรอกยอดเงินผิด
                    </p>
                    <a href="/products/bitpos" class="group inline-flex items-center gap-3 px-8 py-4 bg-white/5 text-white border border-white/10 rounded-full font-bold text-sm tracking-widest uppercase hover:bg-white hover:text-black transition-all duration-300">
                        <span>Explore BiTPos</span>
                        <svg class="w-4 h-4 transform group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"/></svg>
                    </a>
                </div>
            </div>

            <div class="ecosystem-step flex flex-col md:flex-row-reverse items-center gap-12 md:gap-20 mb-20">
                <div class="w-full md:w-1/2 relative step-img">
                    <div class="absolute top-1/2 -left-[51px] w-3 h-3 bg-[#D4AF37] rounded-full shadow-[0_0_15px_#D4AF37] hidden md:block"></div>

                    <div class="aspect-[4/3] rounded-[2.5rem] overflow-hidden bg-[#111] border border-white/10 relative group">
                        <img src="/images/gallery/node-shelf.webp" alt="BiTNode" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-[1.5s]" loading="lazy">
                        <div class="absolute inset-0 bg-gradient-to-t from-[#050505]/80 via-transparent to-transparent"></div>
                        <div class="absolute top-6 left-6">
                            <span class="text-white/80 font-mono text-xs tracking-widest bg-black/50 px-3 py-1 rounded-full backdrop-blur-md border border-white/10">04 / INFRASTRUCTURE</span>
                        </div>
                    </div>
                </div>
                <div class="w-full md:w-1/2 space-y-6 md:pl-10 step-text">
                    <h3 class="text-4xl md:text-5xl font-bold tracking-tight text-white">BiTNode</h3>
                    <h4 class="text-xl md:text-2xl font-light text-[#D4AF37]">ขุมพลังเบื้องหลังที่ไม่มีวันหลับ</h4>
                    <p class="text-white/60 text-lg leading-relaxed max-w-md mb-8">
                        Industrial Grade Node ที่เชื่อมต่อกับ Lightning Network โดยตรง รองรับธุรกรรมนับพันต่อวัน เสถียรที่สุด ไม่ต้องง้อ Server ภายนอก
                    </p>
                    <a href="/products/bitnode" class="group inline-flex items-center gap-3 px-8 py-4 bg-white/5 text-white border border-white/10 rounded-full font-bold text-sm tracking-widest uppercase hover:bg-white hover:text-black transition-all duration-300">
                        <span>Explore BiTNode</span>
                        <svg class="w-4 h-4 transform group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"/></svg>
                    </a>
                </div>
            </div>
        </div>

        <div class="relative bg-gradient-to-br from-[#111] to-[#0a0a0a] rounded-[3rem] p-10 md:p-16 overflow-hidden border border-[#D4AF37]/20 shadow-[0_0_80px_rgba(212,175,55,0.08)] mt-20 reveal-element">
            <div class="flex flex-col md:flex-row items-center justify-between gap-10 relative z-10">
                <div class="w-full md:w-2/3 space-y-4">
                    <h3 class="text-3xl md:text-4xl font-bold text-white">ต้องการคำปรึกษาสำหรับร้านของคุณ?</h3>
                    <p class="text-white/60 text-lg max-w-lg">
                        ติดต่อทีมวิศวกรคนไทยของเรา เพื่อออกแบบระบบนิเวศการรับเงินที่เหมาะสมกับรูปแบบธุรกิจของคุณโดยเฉพาะ
                    </p>
                </div>
                <div class="w-full md:w-1/3 flex justify-start md:justify-end">
                    <a href="https://line.me/ti/p/@cashlessthailand" target="_blank" class="w-full md:w-auto inline-flex items-center justify-center gap-3 px-8 py-5 bg-[#00B900] text-white rounded-2xl font-bold text-lg hover:scale-105 active:scale-95 transition-all shadow-xl group">
                        <svg class="w-8 h-8" viewBox="0 0 24 24" fill="currentColor"><path d="M21.733 11.5c0-4.962-4.869-9-10.866-9-5.998 0-10.867 4.038-10.867 9 0 4.417 3.864 8.2 8.947 8.868.35.07.828.163 1.056.634.204.426.136.963.064 1.488l-.135 1.012c-.042.316-.201.954.837.515 1.037-.439 5.61-3.311 7.85-5.832C20.89 15.356 21.733 13.567 21.733 11.5z"/></svg>
                        <span>คุยกับทีมงานบน LINE</span>
                    </a>
                </div>
            </div>
        </div>

    </div>
</section>

<script>
    document.addEventListener('astro:page-load', () => {
        const observerOptions = {
            root: null,
            rootMargin: '0px 0px -15% 0px', // Trigger when 15% from the bottom of viewport
            threshold: 0.1
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('is-visible');
                    observer.unobserve(entry.target); // Animate only once
                }
            });
        }, observerOptions);

        // Observe images
        document.querySelectorAll('.step-img').forEach(el => observer.observe(el));
        // Observe text blocks
        document.querySelectorAll('.step-text').forEach(el => observer.observe(el));
        // Observe other elements (like the top title and bottom CTA)
        document.querySelectorAll('.reveal-element').forEach(el => observer.observe(el));
    });
</script>

<style>
    /* ---- SCROLL REVEAL ANIMATIONS ---- */

    /* 1. Image Animation: Fade in + Scale down (Cinematic) */
    .step-img {
        opacity: 0;
        transform: scale(0.95) translateY(40px);
        transition: opacity 1s cubic-bezier(0.16, 1, 0.3, 1), transform 1s cubic-bezier(0.16, 1, 0.3, 1);
    }
    .step-img.is-visible {
        opacity: 1;
        transform: scale(1) translateY(0);
    }

    /* 2. Text Animation: Staggered Fade Up */
    .step-text {
        opacity: 0;
        transform: translateY(40px);
        transition: opacity 1s cubic-bezier(0.16, 1, 0.3, 1) 0.3s, transform 1s cubic-bezier(0.16, 1, 0.3, 1) 0.3s; /* 0.3s delay after image */
    }
    .step-text.is-visible {
        opacity: 1;
        transform: translateY(0);
    }

    /* Target inner text elements for staggering */
    .step-text > * {
        opacity: 0;
        transform: translateY(20px);
        transition: all 0.6s cubic-bezier(0.16, 1, 0.3, 1);
    }
    .step-text.is-visible > *:nth-child(1) { opacity: 1; transform: translateY(0); transition-delay: 0.3s; }
    .step-text.is-visible > *:nth-child(2) { opacity: 1; transform: translateY(0); transition-delay: 0.4s; }
    .step-text.is-visible > *:nth-child(3) { opacity: 1; transform: translateY(0); transition-delay: 0.5s; }
    .step-text.is-visible > *:nth-child(4) { opacity: 1; transform: translateY(0); transition-delay: 0.6s; }

    /* Generic Reveal for headers/footers */
    .reveal-element {
        opacity: 0;
        transform: translateY(30px);
        transition: all 1s cubic-bezier(0.16, 1, 0.3, 1);
    }
    .reveal-element.is-visible {
        opacity: 1;
        transform: translateY(0);
    }
</style>